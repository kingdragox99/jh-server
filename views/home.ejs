<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous"
    />
  </head>

  <body>
    <header class="p-3">
      <h1 class="text-center">Admin Pages</h1>
    </header>
    <main>
      <div class="container px-4">
        <form action="/api/post" method="POST" enctype="multipart/form-data">
          <div class="form-group mb-3">
            <label for="name">Image Title</label>
            <input
              class="form-control"
              type="text"
              id="name"
              placeholder="Title"
              value=""
              name="name"
              required
            />
          </div>
          <div class="form-group mb-3">
            <label for="desc">Image Description</label>
            <textarea
              class="form-control"
              id="desc"
              name="desc"
              value=""
              rows="2"
              placeholder="Description"
              required
            ></textarea>
          </div>
          <div class="form-group mb-3">
            <label for="type">Type</label>

            <select
              class="form-control"
              id="type"
              placeholder="type"
              value=""
              name="type"
              required
            >
              <option value="">Chose Type</option>
              <option value="Drawing">Drawing</option>
              <option value="Engraving">Engraving</option>
              <option value="Photography">Photography</option>
              <option value="Painting">Painting</option>
              <option value="Event">Event</option>
            </select>
          </div>
          <div class="form-group mb-3">
            <label for="image">Upload Image</label>
            <input
              class="form-control-file"
              type="file"
              id="image"
              name="image"
              value=""
              required
            />
          </div>
          <div>
            <button class="btn btn-primary" type="submit">Submit</button>
          </div>
        </form>
      </div>
      <div class="p-3">
        <h1 class="text-center">Uploaded Images</h1>
      </div>
      <div class="d-flex flex-wrap px-4 justify-content-center">
        <% items.forEach(function(data) { %>
        <div>
          <div
            class="d-flex flex-column flex-wrap align-items-center text-center"
          >
            <img
              style="width: 400px; height: 400px; object-fit: contain"
              src="data:image/<%=data.img.contentType%>;base64,
                     <%=data.img.data.toString('base64')%>"
            />
            <div>
              <form
                action="/api/update/<%= data.id%>"
                method="post"
                enctype="application/json"
              >
                <div class="form-group mb-3">
                  <label for="name">Image Title</label>
                  <input
                    class="form-control"
                    type="text"
                    id="name"
                    placeholder="Title"
                    value="<%= data.name %>"
                    name="name"
                    required
                  />
                </div>
                <div class="form-group mb-3">
                  <label for="desc">Image Description</label>
                  <textarea
                    class="form-control"
                    id="desc"
                    name="desc"
                    value=""
                    rows="2"
                    placeholder="Description"
                    required
                  >
<%= data.desc %></textarea
                  >
                </div>
                <div class="form-group mb-3">
                  <label for="type">Type</label>

                  <select
                    class="form-control"
                    id="type"
                    placeholder="type"
                    value=""
                    name="type"
                    required
                  >
                    <option value="<%= data.type %>"><%= data.type %></option>
                    <option value="Drawing">Drawing</option>
                    <option value="Engraving">Engraving</option>
                    <option value="Photography">Photography</option>
                    <option value="Painting">Painting</option>
                    <option value="Event">Event</option>
                  </select>
                </div>
                <div>
                  <button class="btn btn-warning" type="submit">update</button>
                  <a
                    class="btn btn-raised btn-danger"
                    href="/api/delete/<%= data.id%>"
                    >Delete</a
                  >
                </div>
              </form>
            </div>
          </div>
        </div>
        <% }) %>
      </div>
    </main>
    <footer
      class="mt-5 text-center text-white"
      style="background-color: #303030"
    >
      <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2)">
        Â© 2022 Copyright :
        <a class="text-white" href="https://www.linkedin.com/in/arthur-lefevre/"
          >Made By Arthur LEFEVRE</a
        >
      </div>
    </footer>
  </body>
</html>
